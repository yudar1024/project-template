spring.application.name=website
server.port=8080



# MyBatis-Flex 配置
mybatis-flex.mapper-locations=classpath*:/mapper/**/*.xml
mybatis-flex.type-aliases-package=com.app.business.website.entity
mybatis-flex.configuration.map-underscore-to-camel-case=true
mybatis-flex.configuration.cache-enabled=true
mybatis-flex.configuration.lazy-loading-enabled=true
mybatis-flex.configuration.aggressive-lazy-loading=false


# Flyway configuration
#spring.flyway.enabled=true
#spring.flyway.locations=classpath:db/migration
#spring.flyway.baseline-on-migrate=true
#spring.flyway.validate-on-migrate=true

# 日志配置
logging.config=classpath:logback-spring.xml
logging.file.name=logs/website.log
logging.file.path=logs
logging.pattern.console=%clr(%d{yyyy-MM-dd HH:mm:ss.SSS}){faint} %clr(${LOG_LEVEL_PATTERN:-%5p}) %clr(${PID:- }){magenta} %clr(---){faint} %clr([%15.15t]){faint} %clr(%-40.40logger{39}){cyan} %clr(:){faint} %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}
logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss.SSS} ${LOG_LEVEL_PATTERN:-%5p} ${PID:- } --- [%t] %-40.40logger{39} : %m%n${LOG_EXCEPTION_CONVERSION_WORD:-%wEx}

# 应用日志配置
logging.level.root=INFO
logging.level.com.app.business.website=DEBUG
logging.level.com.app.business.website.mapper=DEBUG
logging.level.org.springframework.web=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.com.mybatisflex=DEBUG

sa-token.token-name=satoken
sa-token.timeout=2592000
sa-token.active-timeout=600
sa-token.is-concurrent=true
sa-token.is-share=false
sa-token.token-style=uuid
sa-token.is-log=true

# 假设这是你的主数据源 (MySQL)
mybatis-flex.datasource.ds1.url=jdbc:mysql://180.213.184.159:3306/website?useUnicode=true&characterEncoding=utf8&useSSL=false&serverTimezone=Asia/Shanghai
mybatis-flex.datasource.ds1.username=root
mybatis-flex.datasource.ds1.password=Mysql1024
mybatis-flex.datasource.ds1.driver-class-name=com.mysql.cj.jdbc.Driver
mybatis-flex.datasource.ds1.type=com.zaxxer.hikari.HikariDataSource


# 修复部分：IoTDB 数据源配置
# 必须显式添加 username 和 password，即使 URL 里包含了 user/password，
# MyBatis-Flex 在构建 DataSource 时可能需要显式的属性注入给 IoTDBDataSource
mybatis-flex.datasource.ds2.url=jdbc:iotdb://localhost:6667/vpp?sql_dialect=table
mybatis-flex.datasource.ds2.user=root
mybatis-flex.datasource.ds2.password=root
mybatis-flex.datasource.ds2.driver-class-name=org.apache.iotdb.jdbc.IoTDBDriver
mybatis-flex.datasource.ds2.type=org.apache.iotdb.jdbc.IoTDBDataSource

spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.baseline-on-migrate=true
spring.flyway.table=flyway_schema_history
spring.flyway.validate-on-migrate=true
spring.flyway.out-of-order=true
